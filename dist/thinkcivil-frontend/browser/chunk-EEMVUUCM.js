import{a as Y,b as tt,c as et,d as nt,e as it,f as at,g as ot,h as rt,i as st,j as lt,k as mt}from"./chunk-Q53575U7.js";import{a as Q,b as X}from"./chunk-OM2PPL5L.js";import"./chunk-RG53I5Q4.js";import{a as G,b as K}from"./chunk-HS55I5IC.js";import"./chunk-KTA7V4LN.js";import{a as H,b as U,c as $,f as J,g as V,h as q,i as W}from"./chunk-72GRF44D.js";import{Q as Z,R as z,S as F}from"./chunk-QFTUPGTJ.js";import{a as B}from"./chunk-YH6CXKU6.js";import{c as A}from"./chunk-E6UXEH7R.js";import"./chunk-VFMXLW2S.js";import{l as k,p as N,q as R,z as j}from"./chunk-XHE2WULB.js";import{$ as w,$a as r,Ac as L,Da as h,Hb as i,Ib as a,Jb as g,Kb as c,Lb as p,Nb as P,Rb as x,Sb as v,ac as o,bc as M,cc as _,ea as y,fa as f,lb as O,mc as I,na as D,oa as E,oc as T,rb as l,yb as m}from"./chunk-L5KBA6Y7.js";var C=class t{constructor(e){this.http=e}apiUrl=`${B.apiUrl}`;getAllStudents(){return this.http.get(`${this.apiUrl}/admin/students`)}static \u0275fac=function(n){return new(n||t)(y(j))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})};function ft(t,e){if(t&1){let n=P();i(0,"button",8),x("click",function(){D(n);let u=v();return E(u.exportStudents())}),i(1,"mat-icon"),o(2,"download"),a(),o(3," Export CSV "),a()}}function gt(t,e){t&1&&(i(0,"div",9),g(1,"mat-spinner"),i(2,"p"),o(3,"Loading students..."),a()())}function _t(t,e){t&1&&(i(0,"th",23),o(1,"Name"),a())}function Ct(t,e){if(t&1&&(i(0,"td",24)(1,"div",25)(2,"strong"),o(3),a()()()),t&2){let n=e.$implicit;r(3),M(n.fullName)}}function St(t,e){t&1&&(i(0,"th",23),o(1,"Email"),a())}function ht(t,e){if(t&1&&(i(0,"td",24),o(1),a()),t&2){let n=e.$implicit;r(),_(" ",n.email," ")}}function xt(t,e){t&1&&(i(0,"th",23),o(1,"Phone"),a())}function vt(t,e){if(t&1&&(i(0,"td",24),o(1),a()),t&2){let n=e.$implicit;r(),_(" ",n.phone," ")}}function Mt(t,e){t&1&&(i(0,"th",23),o(1,"Joined Date"),a())}function bt(t,e){if(t&1&&(i(0,"td",24),o(1),I(2,"date"),a()),t&2){let n=e.$implicit;r(),_(" ",T(2,1,n.createdAt,"mediumDate")," ")}}function wt(t,e){t&1&&g(0,"tr",26)}function yt(t,e){t&1&&g(0,"tr",27)}function Dt(t,e){if(t&1&&(i(0,"div",10)(1,"mat-card")(2,"mat-card-content")(3,"table",11),c(4,12),l(5,_t,2,0,"th",13)(6,Ct,4,1,"td",14),p(),c(7,15),l(8,St,2,0,"th",13)(9,ht,2,1,"td",14),p(),c(10,16),l(11,xt,2,0,"th",13)(12,vt,2,1,"td",14),p(),c(13,17),l(14,Mt,2,0,"th",13)(15,bt,3,4,"td",14),p(),l(16,wt,1,0,"tr",18)(17,yt,1,0,"tr",19),a()()(),i(18,"mat-card",20)(19,"mat-card-header")(20,"mat-card-title"),o(21,"Summary"),a()(),i(22,"mat-card-content")(23,"div",21)(24,"div",22)(25,"h3"),o(26),a(),i(27,"p"),o(28,"Total Students"),a()()()()()()),t&2){let n=v();r(3),m("dataSource",n.students()),r(13),m("matHeaderRowDef",n.displayedColumns),r(),m("matRowDefColumns",n.displayedColumns),r(9),M(n.students().length)}}function Et(t,e){t&1&&(i(0,"div",28)(1,"mat-card")(2,"mat-card-content")(3,"p"),o(4,"No students found."),a(),i(5,"p"),o(6,"Students will appear here once they register."),a()()()())}var dt=class t{router=f(A);snackBar=f(G);userService=f(C);students=h([]);loading=h(!0);displayedColumns=["fullName","email","phone","joinedDate"];recentStudentsCount=L(()=>{let e=new Date;return e.setMonth(e.getMonth()-1),this.students().filter(n=>new Date(n.createdAt)>e).length});mockStudents=[{_id:"1",fullName:"John Doe",email:"john@example.com",phone:"1234567890",role:"student",createdAt:"2024-01-15T10:30:00.000Z"},{_id:"2",fullName:"Jane Smith",email:"jane@example.com",phone:"0987654321",role:"student",createdAt:"2024-01-20T14:45:00.000Z"},{_id:"3",fullName:"Mike Johnson",email:"mike@example.com",phone:"5551234567",role:"student",createdAt:"2024-02-01T09:15:00.000Z"},{_id:"4",fullName:"Sarah Wilson",email:"sarah@example.com",phone:"4445556666",role:"student",createdAt:"2024-03-10T11:20:00.000Z"}];ngOnInit(){this.loadStudents()}loadStudents(){this.loading.set(!0),this.userService.getAllStudents().subscribe({next:e=>{this.students.set(e),this.loading.set(!1)},error:e=>{console.error("Error loading students:",e),this.snackBar.open("Error loading students","Close",{duration:3e3}),this.loading.set(!1)}})}goBack(){this.router.navigate(["/dashboard"])}viewStudentResults(e){this.router.navigate(["/admin-results"],{queryParams:{studentId:e}})}exportStudents(){let e=this.students();if(e.length===0)return;let n=["Name","Email","Phone","Joined Date"],s=e.map(d=>[d.fullName,d.email,d.phone,new Date(d.createdAt).toLocaleDateString()]),u=[n,...s].map(d=>d.map(pt=>`"${pt}"`).join(",")).join(`
`),ct=new Blob([u],{type:"text/csv"}),b=window.URL.createObjectURL(ct),S=document.createElement("a");S.href=b,S.download=`students-list-${new Date().toISOString().split("T")[0]}.csv`,S.click(),window.URL.revokeObjectURL(b),this.snackBar.open("Students list exported successfully","Close",{duration:3e3})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=O({type:t,selectors:[["app-students-list"]],decls:15,vars:4,consts:[[1,"students-list-container"],[1,"header"],[1,"header-content"],["mat-icon-button","",1,"back-button",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","loading",4,"ngIf"],["class","students-content",4,"ngIf"],["class","no-students",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"loading"],[1,"students-content"],["mat-table","",1,"students-table",3,"dataSource"],["matColumnDef","fullName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","joinedDate"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"summary-card"],[1,"summary-stats"],[1,"summary-item"],["mat-header-cell",""],["mat-cell",""],[1,"student-name"],["mat-header-row",""],["mat-row",""],[1,"no-students"]],template:function(n,s){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),x("click",function(){return s.goBack()}),i(4,"mat-icon"),o(5,"arrow_back"),a()(),i(6,"div")(7,"h1"),o(8,"All Students"),a(),i(9,"p"),o(10,"Manage and view all registered students"),a()()(),l(11,ft,4,0,"button",4),a(),l(12,gt,4,0,"div",5)(13,Dt,29,4,"div",6)(14,Et,7,0,"div",7),a()),n&2&&(r(11),m("ngIf",s.students().length>0),r(),m("ngIf",s.loading()),r(),m("ngIf",!s.loading()&&s.students().length>0),r(),m("ngIf",!s.loading()&&s.students().length===0))},dependencies:[R,k,N,V,H,$,J,U,mt,Y,et,ot,nt,tt,rt,it,at,st,lt,F,z,Z,X,Q,W,q,K],styles:[".students-list-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;flex-wrap:wrap;gap:15px}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#3f51b5}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#666}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;gap:20px}.students-table[_ngcontent-%COMP%]{width:100%}.student-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.summary-card[_ngcontent-%COMP%]{margin-top:20px}.summary-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:20px}.summary-item[_ngcontent-%COMP%]{text-align:center;padding:15px;background:#f5f5f5;border-radius:8px}.summary-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.8em;color:#3f51b5}.summary-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#666}.no-students[_ngcontent-%COMP%]{text-align:center;padding:40px}@media (max-width: 768px){.students-list-container[_ngcontent-%COMP%]{padding:10px}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.students-table[_ngcontent-%COMP%]{font-size:.8em}.summary-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{dt as StudentsListComponent};
